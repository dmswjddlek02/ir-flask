<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>IRì„¼í„° ì—‘ì…€ ì—…ë¡œë“œ</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100 h-screen flex items-center justify-center">
  <div class="bg-white shadow-lg rounded-lg p-10 w-full max-w-md">
    <h1 class="text-2xl font-bold mb-6 text-center text-blue-600">ğŸ“Š ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ</h1>
    <form id="upload-form" class="space-y-4">
      <input type="file" id="file-input" multiple accept=".xlsx,.xls,.csv" 
             class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none" />
      <button type="submit" class="w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded hover:bg-blue-600">
        ì—…ë¡œë“œ
      </button>
    </form>
    <div id="result" class="mt-4 text-green-600 font-semibold text-center"></div>
  </div>

<script>
  const form = document.getElementById("upload-form");
  const fileInput = document.getElementById("file-input");
  const resultDiv = document.getElementById("result");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const files = fileInput.files;
    if (files.length === 0) {
      alert("ì—…ë¡œë“œí•  íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”!");
      return;
    }
    if (files.length > 5) {
      alert("ìµœëŒ€ 5ê°œì˜ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆì–´ìš”.");
      return;
    }

    const formData = new FormData();
    for (let i = 0; i < files.length; i++) {
      formData.append("files", files[i]);
    }

    try {
      const response = await fetch('/upload', {
        method: 'POST',
        body: formData
      });

      const result = await response.json();
      resultDiv.innerText = `âœ… ${result.message}\nì—…ë¡œë“œëœ íŒŒì¼: ${result.files.join(', ')}`;
      setTimeout(() => {
      window.location.href = "/chart";
      }, 1000);
    } catch (error) {
      resultDiv.innerText = "âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨: " + error.message;
    }
  });
</script>


</body>

</html>